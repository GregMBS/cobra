<!DOCTYPE html>
<html>
    <head>
        <title>COBRA Visitador Asignaciones y Recepciones</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.0/themes/redmond/jquery-ui.css" type="text/css" media="all" />
    </head>
    <body>
        <div id="vtable">
            <h1>{{ message }}</h1>
            <form id='asigform' action='/checkboth' method='post'>
                <input type="hidden" name="_token" value="{{ csrf_token() }}">
                <span class="formcap">Visitador:</span>
                <select name="gestor" id="gestor">
                    <option value='' {% if gestor is empty %}selected{% endif %}></option>
                    {% for g in gestores %}
                        <option value="{{ g.iniciales }}" {% if g.iniciales == gestor %}selected{% endif %}>{{ g.completo }}</option>
                    {% endfor %}
                </select>
                <label for="fechaout">Fecha Asignada:</label>
                <input type="text" class="fecha" id="fechaout" name="fechaout" value="{{ fechaout }}">
                <label for="CUENTA">Cuenta:</label>
                <input type="text" id="CUENTA" name="CUENTA" value=""><br>
                <label for="idc">c√≥digo de barras</label>
                <input type="radio" id="idc" name="tipo" {% if tipo == 'id_cuenta' %}checked{% endif %} value="id_cuenta">
                <label for="ndc">numero de cuenta</label>
                <input type="radio" id="ndc" name="tipo" {% if tipo == 'numero_de_cuenta' %}checked{% endif %} value="numero_de_cuenta">
                <input type="submit" name="submit" value="ASIGNAR">
            </form>
            <button onclick="window.location = '/checkoutlist/{{ gestor }}';">CHECKLIST</button>
            <p>Asignado: {{ counts.asig }}<br>
                Recibido: {{ counts.recib }}</p>
            <table class="ui-widget">
                <thead class="ui-widget-header">
                    <tr>
                        <th>ID CUENTA</th>
                        <th>CUENTA</th>
                        <th>NOMBRE</th>
                        <th>CLIENTE</th>
                        <th>SALDO TOTAL</th>
                        <th>QUEUE</th>
                        <th>GESTOR</th>
                        <th>FECHA DE ASIGNA</th>
                        <th>FECHA DE REGRESA</th>
                    </tr>
                </thead>
                <tbody class="ui-widget-content">
                    {% for l in list %}
                        <tr>
                            <td>{{ l.id_cuenta }}</td>
                            <td>{{ l.numero_de_cuenta }}</td>
                            <td>{{ l.nombre_deudor }}</td>
                            <td>{{ l.cliente }}</td>
                            <td>{{ l.saldo_total | number_format }}</td>
                            <td>{{ l.queue }}</td>
                            <td>{{ l.gestor }}</td>
                            <td>{{ l.fechaout }}</td>
                            <td>{{ l.fechain }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <button onclick="window.location = '/reports';">Regresar a la plantilla administrativa</button>
        <br>
        <script src="https://code.jquery.com/jquery-1.12.4.min.js" type="text/javascript"></script>
        <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js" type="text/javascript"></script>
        <script>
            $(function () {
                var cuenta = $('#CUENTA');
            {% if gestor is not empty %}
                    cuenta.focus();
            {% else %}
                    cuenta.prop( "disabled", true );
            {% endif %}
                    $('.fecha').datepicker({ dateFormat: 'yy-mm-dd' });
            });
			$('#gestor').change(function() {
				window.location.href = '/checkboth/'+$(this).val();
			});
        </script>
    </body>
</html>
